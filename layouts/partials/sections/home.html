{{ $author := site.Data.author }}
{{ if (index site.Data site.Language.Lang).author }}
  {{ $author = (index site.Data site.Language.Lang).author }}
{{ end }}

{{ $name := "Jane Doe" }}
{{ if $author.nickname }}
  {{ $name = $author.nickname }}
{{ else if $author.name }}
  {{ $name = $author.name }}
{{ end }}

{{ $sections := site.Data.sections }}
{{ if (index site.Data site.Language.Lang).sections }}
  {{ $sections = (index site.Data site.Language.Lang).sections }}
{{ end }}

{{ $backgroundVideo := "/videos/background-video.mp4" }}
{{ if site.Params.backgroundVideo }}
  {{ $backgroundVideo = site.Params.backgroundVideo }}
{{ end }}

{{ $authorImage := "/images/default-avatar.png" }}
{{ if $author.image }}
  {{ $authorImage = $author.image }}
{{ end }}
{{ $authorImage := resources.Get $authorImage }}

{{/* apply image processing. don't use "Fit" in svg or gif because it's not supported */}}
{{ if and $authorImage (and (ne $authorImage.MediaType.SubType "svg") (ne $authorImage.MediaType.SubType "gif")) }}
  {{ $authorImage = $authorImage.Fit "148x148" }}
{{ end }}

{{/* get file that matches the filename specified as src="" in shortcode */}}
{{ $src := resources.Get $backgroundVideo }}
{{ $backgroundImage := "" }}
{{ if $src }}
  {{/* set video sizes, these are hardcoded for now, x dictates that videos are resized to this width */}}
  {{ $tinyw := default "500x" }}
  {{ $smallw := default "800x" }}
  {{ $mediumw := default "1200x" }}
  {{ $largew := default "1500x" }}

  {{/* resize the src video to the given sizes */}}
  {{ $tiny := $src.Resize $tinyw }}
  {{ $small := $src.Resize $smallw }}
  {{ $medium := $src.Resize $mediumw }}
  {{ $large := $src.Resize $largew }}

  {{/* only use videos smaller than or equal to the src (original) video size, as Hugo will upscale small videos */}}
  {{/* set the sizes attribute to (min-width: 35em) 1200px, 100vw unless overridden in shortcode */}}
  {{ if lt $src.Width 500 }}
    {{ $tiny := $src }}
    {{ $small := $src }}
    {{ $medium := $src }}
    {{ $large := $src }}
  {{ end }}

  {{ if lt $src.Width 800 }}
    {{ $small := $src }}
    {{ $medium := $src }}
    {{ $large := $src }}
  {{ end }}

  {{ if lt $src.Width 1200 }}
    {{ $medium := $src }}
    {{ $large := $src }}
  {{ end }}

  {{ if lt $src.Width 1500 }}
    {{ $large := $src }}
  {{ end }}
{{ else }}
  {{/* set fallback background image */}}
  {{ $backgroundImage = "/images/default-background.jpg" }}
  {{ if site.Params.background }}
    {{ $backgroundImage = site.Params.background }}
  {{ end }}
{{ end }}

<div class="container-fluid home" id="home">
  <style>
    /* Add any necessary CSS styles for the container and other elements */
    <style>
  #homePageBackgroundVideoDivStyled {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
  }

  #homePageBackgroundVideoDivStyled video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>

<div id="homePageBackgroundVideoDivStyled" class="background container-fluid">
  <video autoplay muted loop>
    <source src="/path/to/background-video.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
</div>
  <div class="container content text-center">
    <img src="{{ $authorImage.RelPermalink }}"
      class="rounded-circle mx-auto d-block img-fluid"
      alt="Author Image"
    />
    <h1 class="greeting"> {{ $author.greeting }} {{ $name }}</h1>
    {{ if $author.subtitle }}
      <h2 class="greeting-subtitle">{{ $author.subtitle }}</h2>
    {{ end }}
    <div class="typing-carousel">
      <span id="ityped" class="ityped"></span>
      <span class="ityped-cursor"></span>
    </div>
    <ul id="typing-carousel-data">
      {{ if $author.summary }}
        {{ range $author.summary }}
          <li>{{ . }}</li>
        {{ end}}
      {{ end }}
    </ul>
    {{ if $sections }}
      {{ range first 1 (where (sort $sections "section.weight") ".section.enable" true) }}
        {{ $sectionID := replace (lower .section.name) " " "-"  }}
        {{ if .section.id }}
          {{ $sectionID = .section.id }}
        {{ end }}
        <a href="#{{ $sectionID }}" class="arrow-center" aria-label="{{ i18n "read" }} {{ i18n "more" }} - {{ $name }}"><i class="arrow bounce fa fa-chevron-down"></i></a>
      {{ end }}
    {{ end }}
  </div>
</div>
